!function(){"use-strict";function a(a,b,c,d){function g(a,b){a.baseClass=a.class||e.baseClass,a.thumbClass=a.thumbClass||e.thumbClass,a.thumbsNum=a.thumbsNum||3}var e={baseClass:"ng-gallery",thumbClass:"ng-thumb",templateUrl:"ng-gallery.html"},f={enter:13,esc:27,left:37,right:39},h=e.templateUrl;return d.put(h,'<div class="{{ baseClass }}">  <div ng-repeat="i in images">    <img ng-src="{{ i.thumb }}" class="{{ thumbClass }}" ng-click="openGallery($index)" alt="Image {{ $index + 1 }}" />  </div></div><div class="ng-overlay" ng-show="opened"></div><div class="ng-gallery-content" unselectable="on" ng-show="opened" ng-swipe-left="nextImage()" ng-swipe-right="prevImage()">  <div class="uil-ring-css" ng-show="loading"><div></div></div><a href="{{getImageDownloadSrc()}}" target="_blank" ng-show="showImageDownloadButton()" class="download-image"><i class="fa fa-download"></i></a>  <a class="close-popup" ng-click="closeGallery()"><i class="white">&#215;</i></a>  <a class="nav-left" ng-click="prevImage()"><i class="white">&#8249;</i></a>  <img ondragstart="return false;" draggable="false" ng-src="{{ img }}" ng-click="nextImage()" ng-show="!loading" class="effect" />  <a class="nav-right" ng-click="nextImage()"><i class="white">&#8250;</i></a>  <span class="info-text">{{ index + 1 }}/{{ images.length }} - {{ description }}</span>  <div class="ng-thumbnails-wrapper">    <div class="ng-thumbnails slide-left">      <div ng-repeat="i in images">        <img ng-src="{{ i.thumb }}" ng-class="{\'active\': index === $index}" ng-click="changeImage($index)" />      </div>    </div>  </div></div>'),{restrict:"EA",scope:{images:"=",thumbsNum:"@",hideOverflow:"="},controller:["$scope",function(a){a.$on("openGallery",function(b,c){a.openGallery(c.index)})}],templateUrl:function(a,b){return b.templateUrl||e.templateUrl},link:function(d,e,h){g(d,h),d.thumbsNum>=11&&(d.thumbsNum=11);var i=a.find("body"),j=angular.element(e[0].querySelectorAll(".ng-thumbnails-wrapper")),k=angular.element(e[0].querySelectorAll(".ng-thumbnails"));d.index=0,d.opened=!1,d.thumb_wrapper_width=0,d.thumbs_width=0;var l=function(a){var b=c.defer(),e=new Image;return e.onload=function(){d.loading=!1,typeof this.complete!==!1&&0!==this.naturalWidth||b.reject(),b.resolve(e)},e.onerror=function(){b.reject()},e.src=d.images[a].img,d.loading=!0,b.promise},m=function(a){l(d.index).then(function(a){d.img=a.src,o(d.index)}),d.description=d.images[a].description||""};d.changeImage=function(a){d.index=a,m(a)},d.nextImage=function(){d.index+=1,d.index===d.images.length&&(d.index=0),m(d.index)},d.prevImage=function(){d.index-=1,d.index<0&&(d.index=d.images.length-1),m(d.index)},d.openGallery=function(a){void 0!==typeof a&&(d.index=a,m(d.index)),d.opened=!0,d.hideOverflow&&$("body").css({overflow:"hidden"}),b(function(){var a=n();d.thumbs_width=a.width;var b=a.width+1;k.css({width:b+"px"}),j.css({width:a.visible_width+"px"}),o(d.index)})},d.closeGallery=function(){d.opened=!1,d.hideOverflow&&$("body").css({overflow:""})},i.bind("keydown",function(a){if(d.opened){var b=a.which;b===f.esc?d.closeGallery():b===f.right||b===f.enter?d.nextImage():b===f.left&&d.prevImage(),d.$apply()}});var n=function(){var a=0,b=0;return angular.forEach(k.find("img"),function(c){a+=c.clientWidth,a+=10,b=c.clientWidth+10}),{width:a,visible_width:b*d.thumbsNum}},o=function(a){b(function(){var b=d.images.length,c=d.thumbs_width,e=parseInt(c/b,10),f=a+1,g=Math.ceil(b/f);j[0].scrollLeft=0,j[0].scrollLeft=f*e-g*e},100)}}}}angular.module("jkuri.gallery",[]).directive("ngGallery",a),a.$inject=["$document","$timeout","$q","$templateCache"]}();